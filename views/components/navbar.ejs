<nav
  class="m-0 w-full fixed top-0 left-0 right-0 z-50
         rounded-none bg-white/95 backdrop-blur-md shadow-sm border-b border-gray-50
         flex items-center justify-between px-4 md:px-6 py-3 md:py-3.5
         animate-slideInDown"
>
  <!-- Logo + brand -->
  <div class="flex items-center">
    <a href="/admin/login" class="nav-link">
      <div class="flex items-center gap-2.5">
        <img
          src="/images/logo.jpg"
          alt="Logo"
          loading="lazy"
          class="w-12 h-12 md:w-14 md:h-14 rounded-xl shadow-sm
                 transform transition-all duration-300 hover:scale-105 hover:shadow-md"
        />
      </div>
    </a>
    <h1
      class="font-bold text-base md:text-xl text-gray-900 ml-1.5 md:ml-3
             animate-fadeIn animation-delay-100"
    >
      GS Infra & Estate
    </h1>
  </div>

  <!-- Center links (desktop) -->
  <div class="hidden md:flex items-center gap-1.5 animate-fadeIn animation-delay-200">
    <a
      href="/"
      class="mx-1.5 px-3.5 py-1.5 rounded-full text-sm font-medium text-gray-700 
             hover:text-blue-600 hover:bg-blue-50/80 hover:shadow-sm
             transition-all duration-200 nav-link hover:-translate-y-0.5"
    >Home</a>
    <% const hasAnyProperty =
  (flats && flats.length > 0) ||
  (plots && plots.length > 0) ||
  (agri && agri.length > 0); %>

<% if (hasAnyProperty) { %>
    <a
      href="#property"
      class="mx-1.5 px-3.5 py-1.5 rounded-full text-sm font-medium text-gray-700 
             hover:text-blue-600 hover:bg-blue-50/80 hover:shadow-sm
             transition-all duration-200 nav-link hover:-translate-y-0.5"
    >Properties</a>
    <% } %> 
    <a
      href="#about"
      class="mx-1.5 px-3.5 py-1.5 rounded-full text-sm font-medium text-gray-700 
             hover:text-blue-600 hover:bg-blue-50/80 hover:shadow-sm
             transition-all duration-200 nav-link hover:-translate-y-0.5"
    >About</a>
    <a
      href="#services"
      class="mx-1.5 px-3.5 py-1.5 rounded-full text-sm font-medium text-gray-700 
             hover:text-blue-600 hover:bg-blue-50/80 hover:shadow-sm
             transition-all duration-200 nav-link hover:-translate-y-0.5"
    >Services</a>
    <a
      href="#contact"
      class="mx-1.5 px-3.5 py-1.5 rounded-full text-sm font-medium text-gray-700 
             hover:text-blue-600 hover:bg-blue-50/80 hover:shadow-sm
             transition-all duration-200 nav-link hover:-translate-y-0.5"
    >Contact</a>
  </div>

  <!-- Right: dropdown button (MOBILE ONLY) -->
  <div class="relative md:hidden animate-fadeIn animation-delay-300">
    <button
      id="profileDropdownBtn"
      class="group inline-flex items-center gap-1.5 px-3 py-2 rounded-full border border-gray-200
             bg-white/95 text-gray-700 text-sm font-medium hover:bg-gray-50/80 
             hover:border-gray-300 hover:text-gray-900 hover:shadow-sm
             transition-all duration-200 hover:-translate-y-0.5 active:scale-95"
      aria-label="Toggle menu"
    >
      <svg class="w-4 h-4 group-hover:rotate-180 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
      </svg>
      <span id="profileDropdownIcon" class="transition-transform duration-150">Menu</span>
    </button>

    <!-- Dropdown menu -->
    <div
      id="profileDropdownMenu"
      class="hidden absolute right-0 mt-1.5 w-44 bg-white/95 backdrop-blur-md shadow-lg border border-gray-100
             rounded-xl py-1.5 text-sm animate-fadeInUp"
    >
      <a
        href="/"
        class="block px-4 py-2.5 text-gray-700 hover:text-blue-600 hover:bg-blue-50/80 nav-link
               font-medium transition-all duration-200 border-b border-gray-50 last:border-b-0"
      >ğŸ  Home</a>
      <a
        href="#property"
        class="block px-4 py-2.5 text-gray-700 hover:text-blue-600 hover:bg-blue-50/80 nav-link
               font-medium transition-all duration-200 border-b border-gray-50 last:border-b-0"
      >ğŸ˜ï¸ Properties</a>
      <a
        href="#about"
        class="block px-4 py-2.5 text-gray-700 hover:text-blue-600 hover:bg-blue-50/80 nav-link
               font-medium transition-all duration-200 border-b border-gray-50 last:border-b-0"
      >ğŸ‘¨â€ğŸ’¼ About</a>
      <a
        href="#services"
        class="block px-4 py-2.5 text-gray-700 hover:text-blue-600 hover:bg-blue-50/80 nav-link
               font-medium transition-all duration-200 border-b border-gray-50 last:border-b-0"
      >âš™ï¸ Services</a>
      <a
        href="#contact"
        class="block px-4 py-2.5 text-gray-700 hover:text-blue-600 hover:bg-blue-50/80 nav-link
               font-medium transition-all duration-200"
      >ğŸ“ Contact</a>
    </div>
  </div>
</nav>

<!-- Reduced height animations CSS -->
<style>
@keyframes slideInDown {
  0% { transform: translateY(-100%); opacity: 0; }
  100% { transform: translateY(0); opacity: 1; }
}
@keyframes fadeIn {
  0% { opacity: 0; transform: translateY(6px); }
  100% { opacity: 1; transform: translateY(0); }
}
@keyframes fadeInUp {
  0% { opacity: 0; transform: translateY(8px); }
  100% { opacity: 1; transform: translateY(0); }
}
.animation-delay-100 { animation-delay: 0.1s; }
.animation-delay-200 { animation-delay: 0.2s; }
.animation-delay-300 { animation-delay: 0.3s; }
.animate-slideInDown { animation: slideInDown 0.4s ease-out; }
.animate-fadeIn { animation: fadeIn 0.5s ease-out; }
.animate-fadeInUp { animation: fadeInUp 0.25s ease-out; }
</style>

<script src="/javascripts/spa-nav.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const dropdownBtn = document.getElementById('profileDropdownBtn');
  const dropdownMenu = document.getElementById('profileDropdownMenu');
  const icon = document.getElementById('profileDropdownIcon');

  // Toggle dropdown
  dropdownBtn?.addEventListener('click', function(e) {
    e.stopPropagation();
    dropdownMenu?.classList.toggle('hidden');
    icon?.classList.toggle('rotate-180');
  });

  // Close dropdown when clicking outside
  document.addEventListener('click', function(e) {
    if (!dropdownBtn?.contains(e.target) && !dropdownMenu?.contains(e.target)) {
      dropdownMenu?.classList.add('hidden');
      icon?.classList.remove('rotate-180');
    }
  });

  // Smooth scrolling (reduced offset for smaller navbar)
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({ 
          behavior: 'smooth', 
          block: 'start'
        });
      }
    });
  });

  // Subtle navbar scroll effect
  let ticking = false;
  function updateNavbar() {
    const nav = document.querySelector('nav');
    if (window.scrollY > 30) {
      nav?.classList.add('shadow-md', 'py-2.5', 'md:py-3');
      nav?.classList.remove('py-3', 'md:py-3.5');
    } else {
      nav?.classList.remove('shadow-md', 'py-2.5', 'md:py-3');
      nav?.classList.add('py-3', 'md:py-3.5');
    }
  }
  
  window.addEventListener('scroll', function() {
    if (!ticking) {
      requestAnimationFrame(updateNavbar);
      ticking = true;
    }
    setTimeout(() => { ticking = false; }, 100);
  });
});
</script>
